<?php

# Directionals from ADRB2.pepd:
$direction =
[
	'TMR1' => [   8.263918, -19.060575, -50.507103,  18.293468,  -6.563872, -46.488014,  30.675602,   6.282748, -41.314518 ],
	'TMR2' => [  23.389767,   6.633891, -36.311722,  19.048141,  -8.853634, -38.454079,   8.040357, -21.497700, -40.277676 ],
	'TMR3' => [  15.359751, -16.429365, -23.026138,  14.914004,  -0.272325, -26.463764,  17.880106,  16.153008, -27.715729 ],
	'TMR4' => [  30.782925,   7.576763, -27.147732,  20.556980,  -3.698730, -21.067917,   8.355530, -10.646457, -16.818790 ],
	'TMR5' => [   0.458104,  -7.298905, -16.690619,   9.162039,   2.714896, -25.431005,   8.801460,  19.066465, -32.984921 ],
	'TMR6' => [  16.258125,  12.456451, -39.207165,   6.404618,  -0.001935, -33.592453,  -6.949420,  -3.790924, -20.340841 ],
	'TMR7' => [  -1.531639, -13.724276, -35.813442,  11.210663,  -4.967570, -40.788719,  21.737379,  12.525408, -48.000065 ],
];

# Activation matrix from ADRB2.pepd:
$matrix =
[
	'TMR1' => [ -0.539708,  3.994157,  1.625542, -0.304388,  1.514570, -0.334553, -0.191326, -3.177804, -0.277470 ],
	'TMR2' => [  0.639023, -2.320034,  1.894012, -0.285734,  0.784570, -0.458035,  1.514882,  1.768049,  1.560543 ],
	'TMR3' => [  0.294045,  1.485953, -3.311296, -0.357025, -0.460466, -0.599346, -0.077387, -3.315787, -2.620182 ],
	'TMR4' => [ -3.645325, -0.157720,  3.096836, -0.909857, -0.580977, -0.095592,  3.356684, -2.560075,  1.447403 ],
	'TMR5' => [  3.329328,  1.268617, -1.130465, -0.695048,  0.348531, -1.619858,  0.430631, -0.700092,  2.359522 ],
	'TMR6' => [ -6.829110,  0.658650, -2.010139, -0.280183,  0.955604, -0.613094,  2.981014, -2.436768, -3.073505 ],
	'TMR7' => [  1.641165,  2.943015,  0.602985,  0.019993,  1.663406, -0.248486, -0.091677, -1.675404,  3.805168 ],
];

# Active rotations from ADRB2.pepd:
$rotations =
[
	'TMR1.n' => [  0.268600,  0.059679,  0.335957,  18.562069, -6.504193, -46.152058,  0.032305,  0.124032, -0.991752, 10.834435 ],
	'TMR1.c' => [  0.268600,  0.059679,  0.335957,  18.562069, -6.504193, -46.152058,  0.475108, -0.219396, -0.852137, 6.729019 ],

	'TMR2.n' => [  0.056684, -0.130805,  0.416580,  19.104826, -8.984439, -38.037498,  0.236320,  0.181075, -0.954654, 3.229133 ],
	'TMR2.c' => [  0.056684, -0.130805,  0.416580,  19.104826, -8.984439, -38.037498, -0.307132,  0.319846,  0.896308, 0.381036 ],

	'TMR3.n' => [ -0.050458, -0.468743, -0.350380,  14.863546, -0.741068, -26.814144, -0.734109, -0.118743, -0.668569, 3.582280 ],
	'TMR3.c' => [ -0.050458, -0.468743, -0.350380,  14.863546, -0.741068, -26.814144, -0.932320,  0.155879, -0.326313, 5.106185 ],

	'TMR4.n' => [ -0.811079, -0.293797,  0.489647,  19.745901, -3.992528, -20.578270,  0.824502, -0.565285,  0.025480, 2.799392 ],
	'TMR4.c' => [ -0.811079, -0.293797,  0.489647,  19.745901, -3.992528, -20.578270,  0.447552,  0.206538,  0.870080, 2.602410 ],

	'TMR5.n' => [ -0.287367,  0.479787, -1.760756,  8.874672,  3.194683, -27.191761, -0.628263,  0.722544,  0.288472, 6.523989 ],
	'TMR5.c' => [ -0.287367,  0.479787, -1.760756,  8.874672,  3.194683, -27.191761,  0.887640, -0.200174, -0.414759, 2.009155 ],

	'TMR6.n' => [  0.211686,  0.652274, -0.638783,  6.616304,  0.650339, -34.231236, -0.284807,  0.596452,  0.750419, 15.466973 ],
	'TMR6.c' => [  0.211686,  0.652274, -0.638783,  6.616304,  0.650339, -34.231236,  0.646092,  0.214324,  0.732551, 5.754319 ],

	'TMR7.n' => [  0.530413,  0.771541,  0.144718,  11.741076, -4.196029, -40.644001,  0.381177,  0.174110,  0.907959, 2.319591 ],
	'TMR7.c' => [  0.530413,  0.771541,  0.144718,  11.741076, -4.196029, -40.644001,  0.566781, -0.609170, -0.554681, 12.587067 ],

];



// TMR5 and TMR3 are being pulled too far apart.
// Both helices are descending, i.e. the N-terminus is towards the extracellular region.
if (0)
{
	$dir53  = 
	[
		$direction['TMR5'][0] - $direction['TMR3'][0],
		$direction['TMR5'][1] - $direction['TMR3'][1],
		$direction['TMR5'][2] - $direction['TMR3'][2],
	];

	$decrease = 0.25;

	for ($i=0; $i<2; $i++)
	{
		$matrix['TMR5'][$i] -= ($decrease/2) * $dir53[$i];
		$matrix['TMR3'][$i] += ($decrease/2) * $dir53[$i];
	}
}
