<?php

# Directionals from ADRB2.pepd:
$direction =
[
	'TMR1' => [   8.263918, -19.060575, -50.507103,  18.293468,  -6.563872, -46.488014,  30.675602,   6.282748, -41.314518 ],
	'TMR2' => [  23.389767,   6.633891, -36.311722,  19.048141,  -8.853634, -38.454079,   8.040357, -21.497700, -40.277676 ],
	'TMR3' => [  15.359751, -16.429365, -23.026138,  14.914004,  -0.272325, -26.463764,  17.880106,  16.153008, -27.715729 ],
	'TMR4' => [  30.782925,   7.576763, -27.147732,  20.556980,  -3.698730, -21.067917,   8.355530, -10.646457, -16.818790 ],
	'TMR5' => [   0.458104,  -7.298905, -16.690619,   9.162039,   2.714896, -25.431005,   8.801460,  19.066465, -32.984921 ],
	'TMR6' => [  16.258125,  12.456451, -39.207165,   6.404618,  -0.001935, -33.592453,  -6.949420,  -3.790924, -20.340841 ],
	'TMR7' => [  -1.531639, -13.724276, -35.813442,  11.210663,  -4.967570, -40.788719,  21.737379,  12.525408, -48.000065 ],
];

# Activation matrix from ADRB2.pepd:
$matrix =
[
	'TMR1' => [ -0.833754,  2.508204,  4.936840, -0.598433,  0.028616,  2.976746, -0.485371, -4.663757,  3.033829 ],
	'TMR2' => [  0.344978, -3.805987,  5.205311, -0.579779, -0.701384,  2.853264,  1.220837,  0.282095,  4.871841 ],
	'TMR3' => [  0.000000,  0.000000,  0.000002, -0.651071, -1.946420,  2.711952, -0.371431, -4.801741,  0.691116 ],
	'TMR4' => [ -3.939369, -1.643674,  6.408134, -1.203901, -2.066931,  3.215706,  3.062638, -4.046028,  4.758701 ],
	'TMR5' => [  3.035283, -0.217337,  2.180834, -0.989094, -1.137423,  1.691441,  0.136585, -2.186047,  5.670820 ],
	'TMR6' => [ -7.123156, -0.827303,  1.301159, -0.574228, -0.530350,  2.698204,  2.686969, -3.922721,  0.237793 ],
	'TMR7' => [  1.347119,  1.457062,  3.914284, -0.274053,  0.177452,  3.062813, -0.385721, -3.161357,  7.116467 ],
];

// TMR5 and TMR3 are being pulled too far apart.
// Both helices are descending, i.e. the N-terminus is towards the extracellular region.
if (0)
{
	$dir53  = 
	[
		$direction['TMR5'][0] - $direction['TMR3'][0],
		$direction['TMR5'][1] - $direction['TMR3'][1],
		$direction['TMR5'][2] - $direction['TMR3'][2],
	];

	$decrease = 0.25;

	for ($i=0; $i<2; $i++)
	{
		$matrix['TMR5'][$i] -= ($decrease/2) * $dir53[$i];
		$matrix['TMR3'][$i] += ($decrease/2) * $dir53[$i];
	}
}
